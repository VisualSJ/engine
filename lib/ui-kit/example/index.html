<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Panel Example</title>
    <style>
        body>section {
            font-family: -apple-system, BlinkMacSystemFont, Segoe WPC, Segoe UI, HelveticaNeue-Light, Noto Sans, Microsoft YaHei, PingFang SC, Hiragino Sans GB, Source Han Sans SC, Source Han Sans CN, Source Han Sans, sans-serif;
            margin: 15px;
        }

        h1 {
            margin: 0 0 15px 0;
        }
    </style>
</head>

<body>

    <select id="select">
        <option>ui-input</option>
        <option>ui-num-input</option>
        <option>ui-color</option>
        <option>ui-color-picker</option>
        <option>ui-slider</option>
        <option>ui-select</option>
        <option>ui-section</option>
        <option>ui-checkbox</option>
        <option>ui-loading</option>
        <option>ui-button</option>
        <option>ui-drag</option>
    </select>

    <section id="content">

    </section>

</body>
<script>
    const fs = require('fs');
    const ui = require('../index');
    const $select = document.getElementById('select');
    const $content = document.getElementById('content');
    const regScript = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/; //验证script脚本的正则
    let changeTestPage = function (name) {
        let path = __dirname + '/element/' + name + '.html';
        let $scriptWrap = document.getElementById('scriptWrap');
        if ($scriptWrap) {
            document.body.removeChild($scriptWrap);
        }

        if (!fs.existsSync(path)) {
            $content.innerHTML = '';
            return;
        }
        let contentHtml = fs.readFileSync(path, 'utf-8');
        let scriptArr = contentHtml.match(regScript);
        if (scriptArr !== null) { //先判断文本内是否存在script标签           
            let scriptCodes = scriptArr[0].replace(/<\/?script>/g, ''); //提取标签内容
            contentHtml = contentHtml.replace(scriptArr[0], ''); //移除原html字符串中的script标签部分
            $content.innerHTML = contentHtml;
            //新建script标签，放置原本的script内容
            let $script = document.createElement('script');
            $script.id = 'scriptWrap';
            $script.innerHTML = scriptCodes;
            document.body.appendChild($script);
        } else {
            $content.innerHTML = contentHtml;
        }
    };
    changeTestPage($select.value);
    $select.addEventListener('change', (event) => {
        changeTestPage(event.target.value);
    });

    // 阻止默认打开文件事件
    window.addEventListener('dragover', event => {
    event.dataTransfer.dropEffect = 'none';
        event.preventDefault();
    });
    window.addEventListener('drop', event => {
        event.preventDefault();
    });
</script>


</html>