<section id="event-editor" class="mask"
    @confirm="onConfirm"
>
    <div class="content">
        <div class="header">
            <h4 class="name">{{t('title')}}<span class="dirty" v-if="dirty">*</span></h4>
            <i class="iconfont icon-close" name="close" @mousedown="onMouseDown"></i>
        </div>
        <div class="functions">
            <div class="tools" @mousedown="onMouseDown">
                <i class="iconfont icon-add" 
                    name="addFunc"
                    :title="t('add_func')" 
                ></i>
                <i class="iconfont icon-save-b"
                    name="save"
                ></i>
            </div>
            <div class="func" v-for="(event, eventIndex) in value">
                <ui-section expand>
                    <div slot="header" class="line header" @click.stop>
                        <ui-input name="funcName" placeholder="function Name"
                            :value="event.func"
                            :index="eventIndex"
                        ></ui-input>
                        <span class="tools" @mousedown="onMouseDown">
                            <i class="iconfont icon-del" 
                                name="delFunc" 
                                :title="t('del_func')" 
                                :index="eventIndex"
                            ></i>
                        </span>
                    </div>
                    <div class="params">
                        <div class="line">
                            <span>params</span>
                            <span @mousedown="onMouseDown">
                                <i class="iconfont icon-add" 
                                    name="addParams" 
                                    :title="t('add_params')" 
                                    :index="eventIndex"
                                ></i>
                                <i class="iconfont icon-clear" 
                                    name="clearParams" 
                                    :title="t('clear_params')" 
                                    :index="eventIndex"
                                ></i>
                            </span>
                        </div>
                        <div class="line" v-for="(val, paramIndex) in event.params">
                            <span class="name">{{paramIndex + 1}}</span>
                            <ui-select :value="typeof(val)" name="changeParamType" 
                                :index="JSON.stringify([eventIndex, paramIndex])"
                            >
                                <option value="string">string</option>
                                <option value="number">number</option>
                                <option value="boolean">boolean</option>
                            </ui-select>
                            <ui-input v-if="typeof(val) === 'string'"
                                name="param"
                                :value="val"
                                :index="JSON.stringify([eventIndex, paramIndex])"
                            ></ui-input>
                            <ui-num-input v-if="typeof(val) === 'number'" 
                                name="param"
                                :value="val"
                                :index="JSON.stringify([eventIndex, paramIndex])"
                            ></ui-num-input>
                            <ui-checkbox v-if="typeof(val) === 'boolean'" 
                                name="param"
                                :value="val"
                                :index="JSON.stringify([eventIndex, paramIndex])"
                            ></ui-checkbox>
                            <span class="operate" @mousedown="onMouseDown">
                                <i class="iconfont icon-del"  
                                    name="delParams" 
                                    :title="t('del_params')" 
                                    :index="JSON.stringify([eventIndex, paramIndex])"
                                ></i>
                            </span>
                        </div>
                    </div>
                </ui-section>
            </div>
        </div>
        <div class="toast" v-if="toast">
            {{toast}}
        </div>
    </div>
</section>