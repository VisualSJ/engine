<div>
    <ui-drag-item class="tree-node"
        :draggable="draggable"
        :state="state"
        :active="selects.indexOf(asset.uuid) !== -1" 
        :style="{ paddingLeft: asset.left + 'px' }"
        :class="{'parent':asset.isParent}"
        :isRoot="asset.isRoot"
        :expand="asset.isExpand"
        :type="asset.type"

        @mousedown="mouseDown($event, asset)"
        @click="click($event, asset)" 
        @dragstart="dragStart($event, asset)" 
        @dragover="dragOver($event, asset)" 
        @dragleave="dragLeave($event, asset)" 
        @drop="drop($event, asset)" 
        @dblclick="open($event, asset)"
    >
        <i class="arrow i-arrow-right"
            v-if="asset.isParent" 
            @click.stop="toggle($event, asset)"
            @dblclick.stop
        ></i>
        <section class="loading"
            v-if="state==='loading'"
        >
            <ui-loading></ui-loading>
        </section>
        <tree-node-icon
            :asset="asset"
            :key="asset.uuid"
            v-else
        ></tree-node-icon>

        <label class="name"
            :twinkle="twinkles[asset.uuid]" 
            v-if="state!=='rename'"
        >{{asset.name}}</label>

        <div class="rename"
            v-else
            :state="renameInputState"
            :title="t('operate.' + renameInputState)"
        >
            <input ref='renameInput'
                :value="renameValue"
                @input="renameChange($event)"
                @blur="renameSubmit($event)"
                @keydown.stop
                @keydown.enter="renameSubmit($event)"
                @keydown.esc="renameCancel($event)"
            >
        </div>

        <i class="readonly i-lock"
            :title="t('menu.readonly')"
            v-if="!asset.isRoot && asset.readonly"
        ></i>
    </ui-drag-item>
    <div class="tree-node"
        :style="{ paddingLeft: (asset.left + 34) + 'px' }"
        v-if="asset.isDirectory && state==='add'" 
    >
        <div class="rename"
            :state="addInputState"
            :title="t('operate.' + addInputState)"
        >
            <input ref='addInput'
                :value="addAsset.name"
                @input="addChange($event)"
                @blur="addSubmit($event)"
                @keydown.stop
                @keydown.enter="addSubmit($event)"
                @keydown.esc="addCancel($event)"
            >
        </div>
    </div>
</div>
